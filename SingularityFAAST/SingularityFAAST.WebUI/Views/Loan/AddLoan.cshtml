@*@model IEnumerable<SingularityFAAST.Core.DataTransferObjects.LoansClientsInventoryDTO>*@
@*@model SingularityFAAST.Core.DataTransferObjects.LoansClientsInventoryDTO>*@

@*@model IList<SingularityFAAST.Core.DataTransferObjects.LoansClientsInventoryDTO>*@

@using System.Activities.Statements
@model SingularityFAAST.WebUI.Models.AddLoanInfo

@{
    ViewBag.Title = "Add Loan";
}

<style>
    #sectionTwo {
        padding-top: 40px;
        padding-bottom: 40px;
    }

    #sectionThree {
        padding-bottom: 60px;
    }
</style>

<h2>New Loan</h2>

<br />
<div class="container-fluid">
    @*@Html.BeginForm("AddTheLoan", "Loan", FormMethod.Post, new{@class = ""}){*@

    @* Html Hiddens give us form fields that the model binder will still use, but are hidden from the view *@
    @* whatever you name id's, names, etc, keep them consistent.
        keep in mind the 'name' property on these must match the property names on the C# classes used*@

    @* First parameter will be the name propety - and is what the model binder will use *@
    @*@Html.Hidden("ClientID", null, new { id = "clientIdHidden" })
        @Html.Hidden("InventoryItemIDs", new { id = "inventoryItemIdsHidden", name = "InventoryItemIds" })*@

    @*The three dropdown values*@
    @*@Html.Hidden("Type", null, new { id = "individualHidden" })
        @Html.Hidden("Purpose", null, new { id = "purposeHidden" })
        @Html.Hidden("PurposeType", null, new { id = "purposeTypeHidden" })*@


    @*Date appears, Due date appears*@
    <b>
        Today's Date: @DateTime.Now.ToString("MMMM dd, yyyy")
        <br />
        Loan Due Date: @DateTime.Now.AddDays(28).ToString("MMMM dd")
    </b>

    <hr />

    <h4>Select Client: </h4>
    <div class="row">
        <div class="col-md-12">

            @*search for client by last name, select*@
            <div class="col-md-3 form-inline">
                <input type="text" class="form-control" id="clientSearchInput" name="searchby" placeholder="Search by Client Last Name" /> @*Search by last name*@
                <input type="submit" class="btn btn-primary" name="byName" value='Search' id="clientSearchButton" />
            </div>

            @*Need remove client button here*@    @*Currently must reload the page if wanting new client*@
            @*<div class="col-md-2  form-inline">
                <input type="hidden" id="clientIdNumber" />   @*foreach this*@
            @*<input type="submit" class="btn btn-primary" name="byInvName" value='Remove Selected Client' />
                </div>*@

            @*Error message*@
            <div class="col-md-3" style="color: red;" id="clientInfoAlert"></div>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-md-8">
            <table class="table table-striped table-hover table-condensed"
                   id="clientSearchTable">
                <thead>
                    <tr>
                        <th>
                            Select
                        </th>
                        <th>
                            Client ID
                        </th>
                        <th>
                            First Name
                        </th>
                        <th>
                            Last Name
                        </th>
                        <th>
                            Home Phone
                        </th>
                        <th>
                            Email
                        </th>
                        <th>
                            Eligibility
                        </th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <div id="sectionTwo">

        <div class="row">
            <div class="col-md-12">
                <h4>Loan Information: </h4>

                @*Why is this here?  Isn't this set in the client area?*@
                @*<div class="col-md-3" id="individual">
                        <h5>Type of individual</h5>
                        <div class="radio"><label><input type="radio" name="individ" value="1">Individual with Disability</label>
                        </div>
                        <div class="radio"><label><input type="radio" name="individ" value="2">Family Guardian or Authorized Rep</label>
                        </div>
                        <div class="radio"><label><input type="radio" name="individ" value="3">Reps of Education</label>
                        </div>
                        <div class="radio"><label><input type="radio" name="individ" value="4">Reps of Employment</label>
                        </div>
                        <div class="radio"><label><input type="radio" name="individ" value="5">Reps of Community Living</label>
                        </div>
                        <div class="radio"><label><input type="radio" name="individ" value="6">Reps of Technology</label>
                        </div>
                        <div class="radio"><label><input type="radio" name="individ" value="7">Health Allied Health and Rehab</label>
                        </div>
                    </div>*@

                <div class="col-md-5" id="purpose">
                    <h5>Primary Purpose</h5>
                    <div class="radio">
                        <label><input type="radio" name="purp" value="Assist in decision making (device trial or evaluation">Assist in decision making (device trial or evaluation)</label>
                    </div>
                    <div class="radio">
                        <label><input type="radio" name="purp" value="Provide an accomodation on a short-term basis">Provide an accomodation on a short-term basis</label>
                    </div>
                    <div class="radio">
                        <label><input type="radio" name="purp" value="Conduct training, self-education or other professional development activity">Conduct training, self-education or other professional development activity</label>
                    </div>
                    <div class="radio">
                        <label><input type="radio" name="purp" value="Serve as Loaner during Device Repair or while waiting for funding">Serve as Loaner during Device Repair or while waiting for funding</label>
                    </div>
                </div>

                <div class="col-md-2" id="decision">
                    <h5>Primary Purpose Decision Area</h5>
                    <div class="radio">
                        <label><input type="radio" name="ppda" value="Education">Education</label>
                    </div>
                    <div class="radio">
                        <label><input type="radio" name="ppda" value="Employment">Employment</label>
                    </div>
                    <div class="radio">
                        <label><input type="radio" name="ppda" value="Community Living">Community Living</label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="sectionThree">

        <div class="row">
            <div class="col-md-12">
                <h4>Select Inventory Items: </h4>
                @*search for item by name, select*@
                <div class="col-md-3 form-inline">
                    <input type="text" class="form-control" id="itemSearchInput" name="searchby" placeholder="Search by Item Name" /> @*Search by last name*@
                    <input type="submit" class="btn btn-primary" name="byName" value='Search' id="itemSearchButton" />
                </div>

                @*Button not needed since AJAX came along and made our lives better*@
                @*<div class="col-md-5  form-inline">
                    @*<input type="hidden" value="@Model.InventoryItem.ItemNumber" name="ItemNumber" />*@ @*foreach this*@
                    @*<input type="submit" class="btn btn-primary" name="byInvName" value='Add Selected Item' />
                        </div>*@

                    @*Need remove button*@
                    @*<div class="col-md-2  form-inline">
                        <input type="hidden" id="ItemNumber" /> @*foreach this*@
                    @*<input type="submit" class="btn btn-primary" name="byInvName" value='Remove Selected Item' />
                        </div>*@

                    @*Error message*@
                    <div class="col-md-3" style="color: red;" id="itemsInfoAlert"></div>
                </div>
            </div>
            <br />

            <div class="row">
                <div class="col-md-12">
                    <table class="table table-striped table-hover table-condensed"
                           id="inventorySearchTable">
                        <thead>
                            <tr>
                                <th>
                                    Select
                                </th>
                                <th>
                                    Inventory Id
                                </th>
                                <th>
                                    Item Name
                                </th>
                                <th>
                                    Manufacturer
                                </th>
                                <th>
                                    Description
                                </th>
                                <th>
                                    Accessories
                                </th>
                                <th>
                                    Availability
                                </th>
                                <th>
                                    Damages
                                </th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>


        <div class="row">
            <div class="col-md-7">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title"><b>New Loan Information </b></h4>
                    </div>
                    <div class="panel-body">
                        <div id="cName">
                            @*<h5>Client Anderson, Lorin is checking out these items: </h5>*@
                        </div>
                        <div class="row col-md-6 col-md-offset-1">
                            <div id="iItems">
                                @*Modified Keyboard, Learn To Respond Appropriately*@
                            </div>
                        </div>
                        <br /><br />
                        <b>Items are due on @DateTime.Now.AddDays(28).ToString("MMMM dd") </b>
                        <br />
                    </div>
                </div>
            </div>
        </div>
        <br />
        <div class="row form-group">
            <div class="col-md-10">
                @using (Html.BeginForm("AddTheLoan", "Loan", FormMethod.Post, new { @class = "" }))
                {

                    @* Html Hiddens give us form fields that the model binder will still use, but are hidden from the view *@
                    @* whatever you name id's, names, etc, keep them consistent.
                        keep in mind the 'name' property on these must match the property names on the C# classes used*@

        @* First parameter will be the name propety - and is what the model binder will use *@
        @Html.Hidden("ClientId", null, new { id = "clientIdHidden" })
        @*@Html.Hidden("InventoryItemIds", new { id = "inventoryItemIdsHidden", name = "InventoryItemIds" })*@

        @*The three dropdown values*@
        @*@Html.Hidden("Type", null, new { id = "individualHidden" })*@
        @Html.Hidden("Purpose", null, new { id = "purposeHidden" })
        @Html.Hidden("PurposeType", null, new { id = "purposeTypeHidden" })
        <input type="submit" value="Create New Loan" class="btn btn-success"/>
        }
    </div>
</div>

        <div class="row col-md-3">
            @Html.ActionLink("Back to List", "Index")
        </div>
    </div>


    <script src="~/Scripts/Loans/LoanCreation/ClientInventorySearch.js" type="text/javascript"></script>